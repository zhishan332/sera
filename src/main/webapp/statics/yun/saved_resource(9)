!function(){for(var version="1.3.25",mods=["ctrl","msg","getHelper","xctrl"],modules={},i=0;i<mods.length;i+=1)modules["market/"+mods[i]]={alias:["tbc/market/"+version+"/"+mods[i]]};KISSY.config({combine:!0,packages:[{name:"ali-mod",path:"//g.alicdn.com/",charset:"utf-8"},{name:"gallery",base:"//assets.alicdn.com/s/kissy/"}],modules:modules}),KISSY.add("tms/xtemplate",["cookie","json","kg/xtemplate/4.3.0/runtime"],function(t,e,a,r){function o(){}var c={};t.each("href,protocol,host,hostname,port,pathname,search,hash".split(","),function(t){c[t]=location[t]}),c.query=t.unparam(location.search.slice(1));var i={JSON:e("json"),Math:Math,RegExp:RegExp,"typeof":function(t){return null===t?"null":void 0===t?"undefined":Array.isArray(t)?"array":t instanceof Date?"date":typeof t},url:c},s=e("kg/xtemplate/4.3.0/runtime"),n=["assets","tms","redirect"];t.each(n,function(t){s.addCommand(t,o)});var d=s.prototype.render;return s.prototype.render=function(){return arguments[0]=new s.Scope(arguments[0],{$env:i}),d.apply(this,arguments)},s}),KISSY.add("tms/api",function(t,e){"use strict";var a={},r={add:function(t,r){return a[t]=new e(r),a[t]},use:function(t){return a[t]},GetHelper:e};return r.add("tcepre",{request:{timeout:5,url:"//tce.taobao.org/api/teg.htm",parameters:{tce_sid:"${tce_sid}",tce_vid:"${tce_vid}",env:"${env}",tid:"${tid}",tab:"${tab}",topic:"${topic}",count:"${count}"},charset:"utf-8"},response:{path:"result"}}),r.add("tceplus",{request:{timeout:5,url:"//tce.taobao.com/api/teg.htm",backupUrl:"//www.taobao.com/go/rgn/sys/xctrl/dispatch.php?murl=http://tce.taobao.com/api/teg.htm",parameters:{tce_sid:"${tce_sid}",tce_vid:"${tce_vid}",tid:"${tid}",tab:"${tab}",topic:"${topic}",count:"${count}"},charset:"utf-8"},response:{path:"result"}}),r.add("tcedaily",{request:{timeout:5,url:"//tce.daily.taobao.net/api/mget.htm",parameters:{tce_sid:"${tce_sid}",tce_vid:"${tce_vid}",tid:"${tid}",env:"${env}",tab:"${tab}",topic:"${topic}",count:"${count}"},mergeKey:"tce_sid",mergeCount:"count",charset:"utf-8"},response:{path:"result.${tce_sid}.result"}}),r.add("tceinner",{request:{timeout:5,url:"//tce.taobao.org/api/mget.htm",parameters:{tce_sid:"${tce_sid}",tce_vid:"${tce_vid}",tid:"${tid}",tab:"${tab}",env:"${env}",topic:"${topic}",count:"${count}"},mergeKey:"tce_sid",mergeCount:"count",charset:"utf-8"},response:{path:"result.${tce_sid}.result"}}),r.add("tceonline",{request:{timeout:5,url:"//tce.taobao.com/api/mget.htm",backupUrl:"//www.taobao.com/go/rgn/sys/xctrl/dispatch.php?murl=http://tce.taobao.com/api/mget.htm",parameters:{tce_sid:"${tce_sid}",tce_vid:"${tce_vid}",tid:"${tid}",tab:"${tab}",topic:"${topic}",count:"${count}"},mergeKey:"tce_sid",mergeCount:"count",charset:"utf-8"},response:{path:"result.${tce_sid}.result"}}),r.add("tcecdn",{request:{timeout:5,url:"//tce.alicdn.com/api/mget.htm",backupUrl:"//www.taobao.com/go/rgn/sys/xctrl/dispatch.php?murl=http://tce.alicdn.com/api/mget.htm",parameters:{tce_sid:"${tce_sid}",tce_vid:"${tce_vid}",tid:"${tid}",tab:"${tab}",topic:"${topic}",count:"${count}"},mergeKey:"tce_sid",mergeCount:"count",charset:"utf-8"},response:{path:"result.${tce_sid}.result"}}),r.add("tce",{request:{timeout:5,url:"//tce.taobao.com/api/get.htm",backupUrl:"//www.taobao.com/go/rgn/sys/xctrl/dispatch.php?murl=//tce.taobao.com/api/get.htm",parameters:{tce_sid:"${tce_sid}",tid:"${tid}",tab:"${tab}",topic:"${topic}",count:"${count}"},charset:"utf-8"},response:{path:"result"}}),r},{requires:["market/getHelper"]}),KISSY.use("node,kg/datalazyload/2.0.2/,dom",function(S,Node,DataLazyload,DOM){function dataParse(str){return window.JSON?JSON.parse(str):eval("("+str+")")}function init(t,e){var a=S.one(t);if(!e){var r=a.attr("tms-data");r&&(e=dataParse(r))}a.hasClass("tb-lazyload")||a.one(".J_tb_lazyload")||a.one(".J_tb-lazyload")?datalazyload.addCallback(t,function(){renderCallback(t,e)}):renderCallback(t,e)}function renderCallback(t,e){var a=S.one(t),r=a.attr("tms");a.hasClass("tb-finish")||a.one(".dbl_tms_module_wrap")||S.use("ali-mod/"+r+"/index",function(t,r){r=trackerWrap(r);new r(a,e)})}function trackerWrap(t){var e=S.extend(function(t){var e=t.attr("tms"),a=this,r=arguments;S.use("tbc/tracker/1.1.3/",function(t,o){a._tracker=new o({url:"//tms.alibaba-inc.com/tms-mod/"+e});try{a.constructor.superclass.constructor.apply(a,r)}catch(c){a.error(c.message,!0,c)}})},t,{error:function(t,e,a){if(this._tracker.push({msg:t}),e)throw a?a:new Error(t)}});return e}var vheight=DOM.viewportHeight();vheight=vheight>500?vheight:500;var datalazyload=new DataLazyload({diff:{top:vheight,bottom:vheight}});KISSY.ready(function(){Node.all("[tms]").each(function(t){init(t)})}),window.tmsInit=init})}();!function(a){var b=-1===location.hostname.indexOf("daily.taobao.net"),c=parseFloat(a.version);c>1.1&&(a.config({packages:[{name:"tbc",combine:!0,path:b?"//g.alicdn.com/tbc/":"//g-assets.daily.taobao.net/tbc/",ignorePackageNameInUri:!0}]}),a.config({packages:[{name:"kg",combine:!0,path:b?"//g.alicdn.com/kg/":"//g-assets.daily.taobao.net/kg/",ignorePackageNameInUri:!0}]}),1.2===c&&a.config({map:[[/(\/tbc\/)tbc\//g,"$1"],[/(\/kg\/)kg\//g,"$1"]]}))}(KISSY);